<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.mostoriginaldudes.codingsabubackend.respository.LessonRepository">
    <select id="getAllLessons" resultType="list">
        SELECT *
        FROM lesson
        ORDER BY created_at DESC
        LIMIT 12 #{page}
    </select>

    <select id="getLessonById" resultType="LessonDto">
        SELECT *
        FROM lesson
        WHERE id = #{id}
    </select>

    <insert
            id="createLesson"
            parameterType="com.mostoriginaldudes.codingsabubackend.dto.LessonDto"
            keyProperty="id"
            useGeneratedKeys="true"
    >
        INSERT
         INTO lesson (
         id
         ,teacher_id
         ,title
         ,description
         ,price
         ,terminated_at
         ) VALUES (
         id
         ,#{teacherId}
         ,#{title}
         ,#{description}
         ,#{price}
         ,#{terminatedAt}
         )
    </insert>
</mapper>